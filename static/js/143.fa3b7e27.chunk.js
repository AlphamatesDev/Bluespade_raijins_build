"use strict";(self.webpackChunkraijins_fronend=self.webpackChunkraijins_fronend||[]).push([[143],{296:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var a=t(3971),s=t(6609),i=t(1694),r=t.n(i),d=t(5514),l=t(4690),c=t(9146),o=t(184),u=function(e){var n=e.connectWallet;return(0,o.jsx)("div",{className:r()("staking-hero"),children:(0,o.jsxs)("div",{className:r()("page-intro"),children:[(0,o.jsxs)(l.Z,{children:["Raijins staking for ",(0,o.jsx)("span",{children:"$MATIC"})]}),(0,o.jsx)(d.Z,{children:"Connect your wallet to start staking your Raijins NFTs."}),(0,o.jsx)(d.Z,{children:"For more information, scroll down"}),(0,o.jsx)(c.Z,{variant:"primary",text:"connect wallet",onBtnClick:n})]})})},p=t(4165),m=t(5861),y=t(9439),h=t(4887),f=t(2791),x=t(4029),j=t(6839),g=t(6747),v=(t(8200),t(182),t(8137),t(9165)),k=t(3967),b=t(3666),T=t(696),w=t(8489),N=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"collection","type":"address"},{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"ClaimRewards","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"collection","type":"address"},{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Stake","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"collection","type":"address"},{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"UnStake","type":"event"},{"stateMutability":"payable","type":"fallback"},{"inputs":[{"internalType":"address","name":"_collection","type":"address"},{"internalType":"bool","name":"_allow","type":"bool"}],"name":"allowCollectionToStake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"allowedToStake","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_collection","type":"address"}],"name":"claimRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_collection","type":"address"}],"name":"distributeMatic","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"_collection","type":"address"}],"name":"emergencyWithdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address[]","name":"_collections","type":"address[]"},{"internalType":"address","name":"_user","type":"address"}],"name":"getApprovalStatus","outputs":[{"components":[{"internalType":"address","name":"token_address","type":"address"},{"internalType":"bool","name":"isApproval","type":"bool"}],"internalType":"struct StakingRaijinsMatic.ApprovalStatus[]","name":"_approvalStatus","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"_collections","type":"address[]"},{"internalType":"address","name":"_user","type":"address"}],"name":"getStakingInfo","outputs":[{"components":[{"internalType":"address","name":"_address","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"internalType":"struct StakingRaijinsMatic.StakingInfo[]","name":"_nftsStaked","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"_collections","type":"address[]"},{"internalType":"address","name":"_user","type":"address"}],"name":"getTokensInWallet","outputs":[{"components":[{"internalType":"address","name":"token_address","type":"address"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"token_id","type":"uint256"}],"internalType":"struct StakingRaijinsMatic.TokenInfo[]","name":"_tokensInWallet","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_collection","type":"address"},{"internalType":"address","name":"_user","type":"address"}],"name":"getUserStatus","outputs":[{"internalType":"uint256","name":"_claimedReward","type":"uint256"},{"internalType":"uint256","name":"_pendingReward","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"namePerCollection","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_collection","type":"address"},{"internalType":"string","name":"_name","type":"string"}],"name":"setNamePerCollection","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address[]","name":"_collections","type":"address[]"},{"internalType":"uint256[]","name":"_tokenIds","type":"uint256[]"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_collection","type":"address"},{"internalType":"address","name":"_owner","type":"address"}],"name":"tokensOfOwner","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalDistributed","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address[]","name":"_collections","type":"address[]"},{"internalType":"uint256[]","name":"_tokenIds","type":"uint256[]"}],"name":"unStake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"userPerItem","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"withdrawMatic","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]'),S=t(3658),C=function(e){var n=e.nft,t=(e.timeTypeInfo,e.currentTimeType,e.index),a=e.selectStatusInWallet,s=e.handleSelectNFTInWallet;return(0,o.jsxs)("div",{className:r()("raijins-staking-card"),children:[(0,o.jsx)("div",{className:r()("img-container"),children:(0,o.jsx)("img",{src:n.image,alt:"".concat(n.image),width:"100%"})}),(0,o.jsx)("div",{children:(0,o.jsxs)("p",{className:r()("text-secondary","uppercase","mb-1"),children:["NFT #: ",(0,o.jsx)("br",{}),(0,o.jsxs)("span",{className:r()("text-primary","italic"),children:[n.name," #",n.id]})]})}),(0,o.jsxs)("div",{className:"raijins-checkbox",children:[(0,o.jsx)("input",{type:"checkbox",id:"raijinsCheckbox-".concat(t),checked:!0===a[t],onChange:function(){return s(t)},value:a[t]}),(0,o.jsx)("label",{htmlFor:"raijinsCheckbox-".concat(t)})]})]})},_=function(e){var n=e.nft,t=e.selectStatusStaked,a=e.index,s=e.handleSelectNFTStaked;e.timeTypeInfo;return(0,o.jsxs)("div",{className:r()("raijins-staked-card"),children:[(0,o.jsx)("div",{className:r()("img-container"),children:(0,o.jsx)("img",{src:n.image,alt:"".concat(n.image),width:"100%"})}),(0,o.jsx)("div",{children:(0,o.jsxs)("p",{className:r()("text-secondary","uppercase","mb-1"),children:["NFT #: ",(0,o.jsx)("br",{}),(0,o.jsxs)("span",{className:r()("text-primary","italic"),children:[n.name," #",n.id]})]})}),(0,o.jsxs)("div",{className:"raijins-checkbox",children:[(0,o.jsx)("input",{type:"checkbox",id:"raijinsCheckbox-".concat(a),checked:!0===t[a],onChange:function(){return s(a)},value:t[a]}),(0,o.jsx)("label",{htmlFor:"raijinsCheckbox-".concat(a)})]})]})},M=t(1537),Z=[],I=[],F=function(e){var n,t,s=e.isMobile,i=(0,a.Ge)(),d=i.active,l=i.library,u=i.account,F=(0,f.useState)(!0),R=(0,y.Z)(F,2),L=R[0],H=R[1],A=(0,f.useState)(!0),O=(0,y.Z)(A,2),W=O[0],P=O[1],E=(0,f.useState)([]),z=(0,y.Z)(E,2),B=z[0],U=z[1],V=(0,f.useState)([]),K=(0,y.Z)(V,2),D=K[0],G=K[1],Y=(0,f.useState)(!1),$=(0,y.Z)(Y,2),q=$[0],J=$[1],Q=(0,f.useState)(!1),X=(0,y.Z)(Q,2),ee=X[0],ne=X[1],te=(0,f.useState)(!1),ae=(0,y.Z)(te,2),se=ae[0],ie=ae[1],re=(0,f.useState)(k.a6[0]),de=(0,y.Z)(re,1)[0],le=(0,T.x)().chainId,ce=(0,v.u)(le,"StakingRaijinsMatic"),oe=(0,v.u)(le,"Raijins"),ue=k.Hp.map((function(e){return e.address})),pe=(0,h.ZP)(d&&oe&&[d,le,oe,"balanceOf",ce],{fetcher:(0,b.z6)(l,S)}).data,me=(0,h.ZP)(d&&ce&&[d,le,ce,"totalDistributed"],{fetcher:(0,b.z6)(l,N)}).data,ye=(0,h.ZP)(d&&ce&&[d,le,ce,"getUserStatus",oe,u],{fetcher:(0,b.z6)(l,N)}).data,he=(0,h.ZP)(d&&ce&&[d,le,ce,"getTokensInWallet",ue,u],{fetcher:(0,b.z6)(l,N)}).data,fe=function(e){return void 0===e||0===e.length?[]:e.map((function(e){for(var n=-1,t=0;t<k.Hp.length;t++)if(k.Hp[t].address.toLowerCase()===e.token_address.toLowerCase()){n=t;break}if(-1===n)return null;var a=k.Hp[n],s="";return s="LIFE OF HEL - Volume 1"===a.name?"".concat(a.imageHash).concat(k.BK[Number(e.token_id.toString())-1],".").concat(a.imageType):"".concat(a.imageHash).concat(Number(e.token_id.toString()),".").concat(a.imageType),{id:e.token_id.toString(),name:e.name,address:a.address,image:s}})).filter((function(e){return null!==e}))}(he?he.filter((function(e){return e.token_address.toLowerCase()===de.address.toLowerCase()})):[]),xe=(0,h.ZP)(d&&ce&&[d,le,ce,"getStakingInfo",ue,u],{fetcher:(0,b.z6)(l,N)}).data,je=function(e){return void 0===e||0===e.length?[]:e.map((function(e){for(var n=-1,t=0;t<k.Hp.length;t++)if(k.Hp[t].address.toLowerCase()===e[0].toLowerCase()){n=t;break}if(-1===n)return null;var a=k.Hp[n],s=parseInt(e[1].toString()),i="";return i="LIFE OF HEL - Volume 1"===a.name?"".concat(a.imageHash).concat(k.BK[Number(e[1].toString())-1],".").concat(a.imageType):"".concat(a.imageHash).concat(Number(e[1].toString()),".").concat(a.imageType),{name:a.name,image:i,address:a.address,id:s}})).filter((function(e){return null!==e}))}(xe?xe.filter((function(e){return e._address.toLowerCase()===de.address.toLowerCase()})):[]),ge=(0,h.ZP)(d&&ce&&[d,le,ce,"getApprovalStatus",ue,u],{fetcher:(0,b.z6)(l,N)}).data,ve=!0;if(ge){var ke=ge?ge.filter((function(e){return e.token_address.toLowerCase()===de.address.toLowerCase()})):[];ve=!ke[0].isApproval}var be=(0,f.useState)(!ve),Te=(0,y.Z)(be,2),we=Te[0],Ne=Te[1],Se=function(e){var n=fe[e],t=Z.find((function(e){return e.id===n.id&&e.address===n.address.toLowerCase()}));void 0===t?Z.push({id:n.id,address:n.address.toLowerCase()}):Z=Z.filter((function(e){return e!==t}));for(var a=[],s=function(){var e=fe[i];void 0===Z.find((function(n){return n.id===e.id&&n.address===e.address.toLowerCase()}))?a.push(!1):a.push(!0)},i=0;i<fe.length;i++)s();U(a),0!==Z.length||ve?Ne(!1):Ne(!0)},Ce=function(e){var n=je[e],t=I.find((function(e){return e.id===n.id&&e.address===n.address.toLowerCase()}));void 0===t?I.push({id:n.id,address:n.address.toLowerCase()}):I=I.filter((function(e){return e!==t}));for(var a=[],s=function(){var e=je[i];void 0===I.find((function(n){return n.id===e.id&&n.address===e.address.toLowerCase()}))?a.push(!1):a.push(!0)},i=0;i<je.length;i++)s();G(a),0===I.length?P(!0):P(!1)},_e=function(){Z=[],U([]),Ne(!0)},Me=function(){I=[],G([]),P(!0)};return(0,f.useEffect)((function(){ve&&ne(!1)}),[ve,d]),(0,f.useEffect)((function(){var e;parseFloat(null===ye||void 0===ye||null===(e=ye._pendingReward)||void 0===e?void 0:e.toString())>0?H(!1):H(!0)}),[null===ye||void 0===ye?void 0:ye._pendingReward]),(0,f.useEffect)((function(){_e(),Me()}),[de]),(0,o.jsxs)("div",{className:r()("raijins-staking"),children:[(0,o.jsxs)(j.Z,{classes:"mb-5",children:["Raijins staking for ",(0,o.jsx)("span",{children:"$MATIC"})]}),(0,o.jsxs)("div",{className:r()("raijins-staking-info"),children:[(0,o.jsx)("div",{className:r()("raijins-staking-info-left"),children:"Total Raijins Staked:"}),(0,o.jsx)("div",{className:r()("raijins-staking-info-right"),children:null===pe||void 0===pe?void 0:pe.toString()})]}),(0,o.jsxs)("div",{className:r()("raijins-staking-info"),children:[(0,o.jsx)("div",{className:r()("raijins-staking-info-left"),children:"Total Distributed Matic:"}),(0,o.jsx)("div",{className:r()("raijins-staking-info-right"),children:(0,M.dN)(null===me||void 0===me?void 0:me.toString(),18,2)})]}),(0,o.jsxs)("div",{className:r()("raijins-staking-info"),children:[(0,o.jsx)("div",{className:r()("raijins-staking-info-left"),children:"Your Claimed Amount:"}),(0,o.jsx)("div",{className:r()("raijins-staking-info-right"),children:(0,M.dN)(null===ye||void 0===ye||null===(n=ye._claimedReward)||void 0===n?void 0:n.toString(),18,2)})]}),(0,o.jsxs)("div",{className:r()("raijins-staking-info"),children:[(0,o.jsx)("div",{className:r()("raijins-staking-info-left"),children:"Your Claimable Amount:"}),(0,o.jsx)("div",{className:r()("raijins-staking-info-right"),children:(0,M.dN)(null===ye||void 0===ye||null===(t=ye._pendingReward)||void 0===t?void 0:t.toString(),18,2)})]}),(0,o.jsx)("div",{className:r()("raijins-staking-info"),children:(0,o.jsx)("div",{className:r()("raijins-staking-info-claim"),children:(0,o.jsx)(c.Z,{text:"claim rewards",variant:"transparent",disabled:L,onBtnClick:function(){var e=new x.CH(ce,N,l.getSigner());(0,b.HV)(le,e,"claimRewards",[oe],{sentMsg:"Claim Raijins Ticket submitted!",failMsg:"Claim Raijins Ticket failed."}).then(function(){var e=(0,m.Z)((0,p.Z)().mark((function e(n){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).finally((function(){})),Me()}},"claim")})}),(0,o.jsxs)(g.mQ,{className:r()("raijins-staking-tabs"),children:[(0,o.jsxs)(g.td,{children:[(0,o.jsx)(g.OK,{children:(0,o.jsxs)("p",{children:[(0,o.jsx)("span",{children:fe?fe.length:0})," in wallet"]})}),(0,o.jsx)(g.OK,{children:(0,o.jsxs)("p",{children:[(0,o.jsx)("span",{children:je?je.length:0})," staked"]})})]}),(0,o.jsxs)(g.x4,{children:[s?(0,o.jsx)("div",{className:r()("cards-wrapper","mb-5"),children:fe&&fe.length?fe.map((function(e,n){return(0,o.jsx)(C,{nft:e,index:n,selectStatusInWallet:B,handleSelectNFTInWallet:Se},n)})):(0,o.jsx)("div",{className:r()("p-1","text-center","text-danger"),children:"No NFTs in wallet"})}):(0,o.jsx)("div",{className:r()("table-wrapper","mb-5"),children:(0,o.jsxs)("table",{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{rowSpan:fe?fe.length+1:0,children:[(0,o.jsx)("th",{children:"nft visual"}),(0,o.jsx)("th",{children:"nft #"}),(0,o.jsx)("th",{children:"selected"})]})}),(0,o.jsx)("tbody",{children:fe&&fe.length?fe.map((function(e,n){return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"nft-visual",children:(0,o.jsx)("img",{src:e.image,alt:"".concat(e.image)})}),(0,o.jsxs)("td",{className:"w-20",children:[e.name," #",e.id]}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"raijins-checkbox",children:[(0,o.jsx)("input",{type:"checkbox",id:"raijinsCheckbox-".concat(n),checked:!0===B[n],onChange:function(){return Se(n)},value:B[n]}),(0,o.jsx)("label",{htmlFor:"raijinsCheckbox-".concat(n)})]})})]},e.id)})):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:6,className:r()("text-danger","text-center","p-1"),children:"No NFTs in wallet"})})})]})}),(0,o.jsxs)("div",{className:"btn-group",children:[(0,o.jsx)("button",{className:r()("select-all-btn"),onClick:function(){var e=[];Z=[];for(var n=0;n<fe.length;n++){var t=fe[n];Z.push({id:t.id,address:t.address.toLowerCase()}),e.push(!0)}U(e),Ne(!1)},children:"select all"}),(0,o.jsx)(c.Z,{text:ve&&ee?"Waiting for Approval...":q?"Approving":ve?"Approve":se?"Staking...":"Stake",variant:"primary",disabled:we,onBtnClick:function(){if(ve)ve&&(0,w.q)({setIsApproving:J,library:l,tokenAddress:de.address,spender:ce,chainId:le,onApproveSubmitted:function(){ne(!0)}});else{ie(!0);var e=Z.map((function(e){return e.address})),n=Z.map((function(e){return e.id})),t=new x.CH(ce,N,l.getSigner());(0,b.HV)(le,t,"stake",[e,n],{sentMsg:"Staking Raijins NFT submitted!",failMsg:"Staking Raijins NFT failed."}).then(function(){var e=(0,m.Z)((0,p.Z)().mark((function e(n){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).finally((function(){ie(!1)})),_e()}}},"stake")]})]}),(0,o.jsxs)(g.x4,{children:[s?(0,o.jsx)("div",{className:r()("cards-wrapper","mb-5"),children:je&&je.length?je.map((function(e,n){return(0,o.jsx)(_,{nft:e,index:n,selectStatusStaked:D,handleSelectNFTStaked:Ce})})):(0,o.jsx)("div",{className:r()("p-1","text-center","text-danger"),children:"No NFTs in wallet"})}):(0,o.jsx)("div",{className:r()("table-wrapper","mb-5"),children:(0,o.jsxs)("table",{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{rowSpan:je?je.length+1:0,children:[(0,o.jsx)("th",{children:"nft visual"}),(0,o.jsx)("th",{children:"nft #"}),(0,o.jsx)("th",{children:"selected"})]})}),(0,o.jsx)("tbody",{children:je&&je.length?je.map((function(e,n){return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"nft-visual",children:(0,o.jsx)("img",{src:e.image,alt:"".concat(e.image)})}),(0,o.jsxs)("td",{className:"w-20",children:[e.name," #",e.id]}),(0,o.jsx)("td",{children:(0,o.jsxs)("div",{className:"raijins-checkbox",children:[(0,o.jsx)("input",{type:"checkbox",id:"raijinsCheckbox-".concat(n),checked:!0===D[n],onClick:function(){return Ce(n)},value:D[n]}),(0,o.jsx)("label",{htmlFor:"raijinsCheckbox-".concat(n)})]})})]},e.id)})):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:6,className:r()("text-danger","text-center","p-1"),children:"No staked NFTs"})})})]})}),(0,o.jsxs)("div",{className:"btn-group",children:[(0,o.jsx)("button",{className:r()("select-all-btn"),onClick:function(){var e=[];I=[];for(var n=0;n<je.length;n++){var t=je[n];I.push({id:t.id,address:t.address.toLowerCase()}),e.push(!0)}G(e),P(!1)},children:"select all"}),(0,o.jsx)(c.Z,{text:"unstake",variant:"transparent",disabled:W,onBtnClick:function(){var e=I.map((function(e){return e.address})),n=I.map((function(e){return e.id})),t=new x.CH(ce,N,l.getSigner());(0,b.HV)(le,t,"unStake",[e,n],{sentMsg:"Unstake Raijins NFT submitted!",failMsg:"Unstake Raijins NFT failed."}).then(function(){var e=(0,m.Z)((0,p.Z)().mark((function e(n){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).finally((function(){})),Me()}},"unstake")]})]})]})]})},R=t(7556),L=t(7968),H=t(9170),A=function(e){var n=e.connectWallet,t=(0,a.Ge)().active,i=(0,H.ac)("only screen and (max-width: 640px)");return(0,o.jsx)(s.Z,{children:(0,o.jsx)(R.Z,{children:t?(0,o.jsx)(F,{isMobile:i}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u,{connectWallet:n}),(0,o.jsx)(L.Z,{isMobile:i})]})})})}}}]);
//# sourceMappingURL=143.fa3b7e27.chunk.js.map